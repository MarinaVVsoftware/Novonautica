{% extends 'estructura/plantilla.twig' %}

{% block title %}
    Novonautica | Nueva cotización
{% endblock %}

{% block contwrapper %}
    <div class="content-wrapper">
        <section class="content">
            <div class="panel panel-novo">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-sm-6">
                            <h3 class="panel-title">Nueva Cotización</h3>
                        </div>
                        <div class="col-sm-6">
                            <a class="btn btn-contorno-azul pull-right"
                               href="{{ path('astillero_index') }}">Regresar</a>
                        </div>
                    </div>
                </div>
                <div class="panel-body panel-pestanias">
                    {% form_theme form 'estructura/temaerror.html.twig' %}
                    {{ form_start(form) }}
                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" class="primero active">
                            <a href="#generales" aria-controls="generales" role="tab" data-toggle="tab">Generales</a>
                        </li>
                        <li role="presentation">
                            <a href="#servicios" aria-controls="servicios" role="tab" data-toggle="tab">Servicios
                                Generales</a>
                        </li>
                        <li role="presentation">
                            <a href="#total" aria-controls="total" role="tab" data-toggle="tab">Servicios</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="row">
                            <div class="col-sm-6">
                                {{ form_errors(form.fechaLlegada) }}
                                {{ form_errors(form.fechaSalida) }}
                                {{ form_errors(form.barco) }}
                                {{ form_errors(form.diasEstadia) }}
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane active" id="generales">
                            <div class="row">
                                <div class="col-sm-3">
                                    {{ form_row(form.cliente) }}
                                    <div id="info-cliente">

                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="radio buscabarcomh">
                                        {{ form_label(form.barco) }}
                                        {{ form_widget(form.barco) }}
                                    </div>
                                    <div id="info-barco">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="servicios">
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="input-daterange" id="rangoFehas">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                {{ form_label(form.fechaLlegada) }}
                                                {{ form_widget(form.fechaLlegada) }}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                {{ form_label(form.fechaSalida) }}
                                                {{ form_widget(form.fechaSalida) }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    {{ form_label(form.diasEstadia) }}
                                    {{ form_widget(form.diasEstadia) }}
                                </div>
                            </div>
                            <div class="row espacio-linea">
                                <div class="col-sm-7">
                                    <hr>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-sm-offset-1">
                                    <label class="tipo-letra1">Uso de grua</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-1">

                                </div>
                                <div class="col-sm-3">
                                    <label>Número de pies</label>
                                    {% if form.acservicios.0.cantidad is defined %}
                                        {{ form_widget(form.acservicios.0.cantidad) }}
                                    {% endif %}
                                </div>
                                <div class="col-sm-3">
                                    <label>Precio por pie</label>
                                    {% if form.acservicios.0.precio is defined %}
                                        {{ form_widget(form.acservicios.0.precio) }}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="row espacio-linea">
                                <div class="col-sm-7">
                                    <hr>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-sm-offset-1">
                                    <label class="tipo-letra1">Uso de suelo</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-1">

                                </div>
                                <div class="col-sm-3">
                                    <label>Precio por día</label>
                                    {% if form.acservicios.1.precio is defined %}
                                        {{ form_widget(form.acservicios.1.precio) }}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="row espacio-linea">
                                <div class="col-sm-7">
                                    <hr>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-sm-offset-1">
                                    <label class="tipo-letra1">Uso de rampa (precio)</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-1">
                                    <div class="input-estatus">
                                        <span class="cont-label-novo">
                                             {% if form.acservicios.2.estatus is defined %}
                                                 {{ form_errors(form.acservicios.2.estatus) }}
                                                 {{ form_widget(form.acservicios.2.estatus) }}
                                                 {{ form_label(form.acservicios.2.estatus) }}
                                             {% endif %}
                                         </span>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <label>Precio</label>
                                    {% if form.acservicios.2.precio is defined %}
                                        {{ form_widget(form.acservicios.2.precio) }}
                                    {% endif %}

                                </div>
                            </div>
                            <div class="row espacio-linea">
                                <div class="col-sm-7">
                                    <hr>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-sm-offset-1">
                                    <label class="tipo-letra1">Uso de karcher</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-1">
                                    <div class="input-estatus">
                                        <span class="cont-label-novo">
                                             {% if form.acservicios.3.estatus is defined %}
                                                 {{ form_errors(form.acservicios.3.estatus) }}
                                                 {{ form_widget(form.acservicios.3.estatus) }}
                                                 {{ form_label(form.acservicios.3.estatus) }}
                                             {% endif %}
                                         </span>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <label>Precio</label>
                                    {% if form.acservicios.3.precio is defined %}
                                        {{ form_widget(form.acservicios.3.precio) }}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="row espacio-linea">
                                <div class="col-sm-7">
                                    <hr>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6 col-sm-offset-1">
                                    <label class="tipo-letra1">Sacar varada y botadura</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-1">
                                    <div class="input-estatus">
                                        <span class="cont-label-novo">
                                              {% if form.acservicios.4.estatus is defined %}
                                                  {{ form_errors(form.acservicios.4.estatus) }}
                                                  {{ form_widget(form.acservicios.4.estatus) }}
                                                  {{ form_label(form.acservicios.4.estatus) }}
                                              {% endif %}
                                         </span>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <label>Número de pies</label>
                                    {% if form.acservicios.4.cantidad is defined %}
                                        {{ form_widget(form.acservicios.4.cantidad) }}
                                    {% endif %}

                                </div>
                                <div class="col-sm-3">
                                    <label>Precio por pie</label>
                                    {% if form.acservicios.4.precio is defined %}
                                        {{ form_widget(form.acservicios.4.precio) }}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="total">
                            <div class="row">
                                <div class="col-sm-9 text-right">
                                    <span>Tipo de cambio:</span>
                                    <div id="valdolar" class="" data-valor="{{ valdolar }}">{{ valdolar }} MXN</div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-9">
                                    <small>Precios en USD</small>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-9">
                                    <table id="a_nuevacotizacion" class="table text-center">
                                        <thead>
                                        <tr>
                                            <th class="col-sm-1">Cantidad</th>
                                            <th class="col-sm-2">Servicio</th>
                                            <th class="col-sm-1">Prec. Unid.</th>
                                            <th class="col-sm-1">Sub-Total</th>
                                            <th class="col-sm-1">IVA</th>
                                            <th class="col-sm-1">Total</th>
                                            <th class="col-sm-1"></th>
                                        </tr>
                                        </thead>
                                        <tbody id="servicio-fields-list0"
                                               class="lista-servicios"
                                               data-prototype="
                                                    {% filter escape %}
                                                        {{ include('astillerocotizacion/coleccion-servicio.twig', { 'form': form.acservicios.vars.prototype }) }}
                                                        {#{{ form_widget(form.acservicios.vars.prototype) }}#}
                                                    {% endfilter %}"
                                               data-prototype2="
                                                    {% filter escape %}
                                                        {{ include('astillerocotizacion/coleccion-producto.twig', { 'form': form.acservicios.vars.prototype }) }}
                                                    {% endfilter %}"
                                        >
                                        <tr>
                                            <td id="grua_cantidad">0</td>
                                            <td>Uso de grua</td>
                                            <td id="grua_precio">$ 0.00</td>
                                            <td id="grua_subtotal" data-valor="0">$ 0.00</td>
                                            <td id="grua_iva" data-valor="0">$ 0.00</td>
                                            <td id="grua_total" data-valor="0">$ 0.00</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td id="suelo_cantidad">0</td>
                                            <td>Uso de suelo</td>
                                            <td id="suelo_precio">$ 0.00</td>
                                            <td id="suelo_subtotal" data-valor="0">$ 0.00</td>
                                            <td id="suelo_iva" data-valor="0">$ 0.00</td>
                                            <td id="suelo_total" data-valor="0">$ 0.00</td>
                                            <td></td>
                                        </tr>
                                        <tr class="hidden">
                                            <td>1</td>
                                            <td>Uso de rampa</td>
                                            <td id="rampa_precio">$ 0.00</td>
                                            <td id="rampa_subtotal" data-valor="0">$ 0.00</td>
                                            <td id="rampa_iva" data-valor="0">$ 0.00</td>
                                            <td id="rampa_total" data-valor="0">$ 0.00</td>
                                            <td></td>
                                        </tr>
                                        <tr class="hidden">
                                            <td>1</td>
                                            <td>Uso de karcher</td>
                                            <td id="karcher_precio">$ 0.00</td>
                                            <td id="karcher_subtotal" data-valor="0">$ 0.00</td>
                                            <td id="karcher_iva" data-valor="0">$ 0.00</td>
                                            <td id="karcher_total" data-valor="0">$ 0.00</td>
                                            <td></td>
                                        </tr>
                                        <tr class="hidden">
                                            <td id="varada_cantidad">0</td>
                                            <td>Sacar varada y boadura</td>
                                            <td id="varada_precio">$ 0.00</td>
                                            <td id="varada_subtotal" data-valor="0">$ 0.00</td>
                                            <td id="varada_iva" data-valor="0">$ 0.00</td>
                                            <td id="varada_total" data-valor="0">$ 0.00</td>
                                            <td></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-sm-3">
                                    {#<div class="row">#}
                                    {#<div class="col-sm-12">#}
                                    {#<a class="btn btn-morado-claro">Visualizar</a>#}
                                    {#</div>#}
                                    {#</div>#}
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <button type="submit" class="btn btn-azul">
                                                <i class="fa fa-floppy-o" aria-hidden="true"></i>
                                                Guardar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-9">
                                    <div id="valiva" class="" data-valor="{{ valiva }}">
                                        <small>IVA: {{ valiva }} %</small>
                                    </div>
                                </div>
                            </div>
                            <div class="row espacio-linea">
                                <div class="col-sm-9">
                                    <hr>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <a href="#" id="" class="add-another-servicio btn btn-contorno-azul" data-cantidad="{{ form.acservicios|length }}" data-idlista="0">
                                        + Agregar servicio
                                    </a>
                                    <a href="#" class="add-producto btn btn-contorno-azul">
                                        + Agrega Producto
                                    </a>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 col-sm-offset-5">
                                    <hr>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-5 col-sm-offset-4 text-right tipo-letra1">
                                    <p class="letra-azul">Sub-Total:</p>
                                    <p>
                                        $ <span id="gransubtot">00.00</span>
                                        <span class="tipo-letra2">USD</span>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 col-sm-offset-5">
                                    <hr>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-5 col-sm-offset-4 text-right tipo-letra1">
                                    <p class="letra-azul">I.V.A:</p>
                                    <p>
                                        $ <span id="graniva">00.00</span>
                                        <span class="tipo-letra2">USD</span>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 col-sm-offset-5">
                                    <hr>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-5 col-sm-offset-4 text-right tipo-letra1">
                                    <p class="letra-azul">Total:</p>
                                    <p>
                                        $ <span id="grantot">00.00</span>
                                        <span class="tipo-letra2">USD</span>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 col-sm-offset-5">
                                    <hr>
                                </div>
                            </div>

                        </div>
                    </div>
                    {% if form.acservicios.0.estatus is defined %}
                        {{ form_widget(form.acservicios.0.estatus,{'attr':{'class':'hidden'}}) }}
                    {% endif %}
                    {% if form.acservicios.1.estatus is defined %}
                        {{ form_widget(form.acservicios.1.estatus,{'attr':{'class':'hidden'}}) }}
                    {% endif %}
                    {% if form.acservicios.1.cantidad is defined %}
                        {{ form_widget(form.acservicios.1.cantidad,{'attr':{'class':'hidden'}}) }}
                    {% endif %}
                    {% if form.acservicios.2.cantidad is defined %}
                        {{ form_widget(form.acservicios.2.cantidad,{'attr':{'class':'hidden'}}) }}
                    {% endif %}
                    {% if form.acservicios.3.cantidad is defined %}
                        {{ form_widget(form.acservicios.3.cantidad,{'attr':{'class':'hidden'}}) }}
                    {% endif %}
                    {% if form.acservicios.0.servicio is defined %}
                        {{ form_widget(form.acservicios.0.servicio,{'attr':{'class':'hidden'}}) }}
                    {% endif %}
                    {% if form.acservicios.1.servicio is defined %}
                        {{ form_widget(form.acservicios.1.servicio,{'attr':{'class':'hidden'}}) }}
                    {% endif %}
                    {% if form.acservicios.2.servicio is defined %}
                        {{ form_widget(form.acservicios.2.servicio,{'attr':{'class':'hidden'}}) }}
                    {% endif %}
                    {% if form.acservicios.3.servicio is defined %}
                        {{ form_widget(form.acservicios.3.servicio,{'attr':{'class':'hidden'}}) }}
                    {% endif %}
                    {% if form.acservicios.4.servicio is defined %}
                        {{ form_widget(form.acservicios.4.servicio,{'attr':{'class':'hidden'}}) }}
                    {% endif %}
                    {#{% if form.acservicios.0.productos is defined %}#}
                        {#{{ form_widget(form.acservicios.0.productos,{'attr':{'class':'hidden'}}) }}#}
                    {#{% endif %}#}
                    {#{% if form.acservicios.1.productos is defined %}#}
                        {#{{ form_widget(form.acservicios.1.productos,{'attr':{'class':'hidden'}}) }}#}
                    {#{% endif %}#}
                    {#{% if form.acservicios.2.productos is defined %}#}
                        {#{{ form_widget(form.acservicios.2.productos,{'attr':{'class':'hidden'}}) }}#}
                    {#{% endif %}#}
                    {#{% if form.acservicios.3.productos is defined %}#}
                        {#{{ form_widget(form.acservicios.3.productos,{'attr':{'class':'hidden'}}) }}#}
                    {#{% endif %}#}
                    {#{% if form.acservicios.4.productos is defined %}#}
                        {#{{ form_widget(form.acservicios.4.productos,{'attr':{'class':'hidden'}}) }}#}
                    {#{% endif %}#}
                    {{ form_end(form) }}
                </div>
                <div class="panel-footer">
                    <div class="row">
                        <div class="col-sm-12">
                            <a href="{{ path('astillero_index') }}" class="btn btn-naranja pull-right">
                                <i class="fa fa-ban" aria-hidden="true"></i>
                                Cancelar
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
{% endblock %}
{% block modals %}
    <div class="modal fade" id="buscaProducto" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Agrega productos</h4>
                </div>
                <div class="modal-body">
                    <div id="listadoproductos">

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}